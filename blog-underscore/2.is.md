### 概览

一个个看看下列判断类型的方法，和我们常规判断类型的`typeof` `Object.prototype.toString.call()`的区别。

```javascript
var _ = {
  isObject: isObject,
  isNull: isNull,
  isUndefined: isUndefined,
  isBoolean: isBoolean,
  isElement: isElement,
  isString: isString,
  isNumber: isNumber,
  isDate: isDate,
  isRegExp: isRegExp,
  isError: isError,
  isSymbol: isSymbol,
  isArrayBuffer: isArrayBuffer,
  isDataView: isDataView$1,
  isArray: isArray,
  isFunction: isFunction$1,
  isArguments: isArguments$1,
  isFinite: isFinite$1,
  isNaN: isNaN$1,
  isTypedArray: isTypedArray$1,
  isEmpty: isEmpty,
  isMatch: isMatch,
  isEqual: isEqual,
  isMap: isMap,
  isWeakMap: isWeakMap,
  isSet: isSet,
  isWeakSet: isWeakSet,
}
```

### 代码分析

#### isObject

> 判断是否对象

```javascript
// 判断是否是对象
function isObject(obj) {
  var type = typeof obj
  return type === 'function' || (type === 'object' && !!obj)
}
```

- `typeof` 返回为’function‘
- `typeof` 返回为'object'并且`!!obj`，这个条件主要是排出 `null`

相关示例

```javascript
console.log(_.isObject({})) // true
console.log(_.isObject(null)) // false
console.log(_.isObject(1)) // false
console.log(_.isObject(new Number())) // true
console.log(_.isObject(true)) // false
console.log(_.isObject(new Boolean())) // true
console.log(_.isObject('1')) // false
console.log(_.isObject(new String())) // true
const fn = function f() {}
console.log(_.isObject(fn)) // true
console.log(_.isObject([])) // true
console.log(_.isObject(new Date())) // true
```

通过下面的示例，不难看出：

1. 函数和数组属于对象。null 不是对象。
2. 1 不属于对象 `new Number()`属于对象
3. ‘1’不属于对象 `new String()`属于对象
4. true 不属于对象 `new Boolean()`属于对象

#### isNull

> null 虽然 typeof，返回是'object'，但是它还是属于 null 类型，如何判断呢。

```javascript
// 判断是否为null
// Is a given value equal to null?
function isNull(obj) {
  return obj === null
}
```

相关示例

```javascript
_.isNull(null);
=> true
_.isNull(undefined);
=> false
```

#### isUndefined

> 既然 null 使用全等判断的，那么 `undefined` 为何是全等 `void 0`

```javascript
// Is a given variable undefined?
// 判断是否为undefined
function isUndefined(obj) {
  return obj === void 0
}
```

相关示例

```javascript
_.isUndefined(window.missingVariable);
_.isUndefined(undefined);
=> true

console.log(undefined === void 0) //true
console.log(undefined === void 1) //true
console.log(undefined === void (new Date())) //true
```

`void` 运算符能对给定的表达式进行求值，然后返回 `undefined`。

#### isBoolean

> 判断是否为 Boolean

```javascript
// 判断是否为Boolean
function isBoolean(obj) {
  return (
    obj === true || obj === false || toString.call(obj) === '[object Boolean]'
  )
}
```

思考：为啥不直接用`toString.call(obj) === '[object Boolean]')`?

```javascript
const Proto = Object.prototype.toString

console.log(Proto.call(true)) // '[object Boolean]'
console.log(Proto.call(false)) // '[object Boolean]'

console.log(Proto.call(new Boolean(true))) // '[object Boolean]'
console.log(true === new Boolean(true)) // false
console.log(false === new Boolean(false)) // false
console.log(new Boolean(0)) // Boolean {false}
console.log(typeof new Boolean(0)) // 'object'
```

对于`new Boolean` `typeof`返回的是对象。但是`Object.prototype.toString.call()`返回的是'[object Boolean]'。
很明显 underscore 返回的是 true.

#### isElement

> 判断是否为 elements

```javascript
// 判断是否为element
function isElement(obj) {
  return !!(obj && obj.nodeType === 1)
}
```

让我们看看对创建 Element 判断是怎样

```javascript
const div = document.createElement('div')
const img = document.createElement('img')
console.log(_.isElement(div)) // true
console.log(_.isElement(img)) // true
```

#### function tagTester

> 实际上就是对`Object.prototype.toString.call()`做了些不同返回的处理

```javascript
function tagTester(name) {
  var tag = '[object ' + name + ']'
  // `[object ${name}]` 个人觉得模板字符串更好看。
  return function (obj) {
    return toString.call(obj) === tag
  }
}
```

#### isString

> 判断是否字符串，还需要验证下 new String()

```javascript
var isString = tagTester('String')
```

验证下`new String()`

```javascript
console.log(_.isString(new String())) // true
console.log(typeof new String()) // 'object'
```

#### isNumber

> 判断是否数字

```javascript
var isNumber = tagTester('Number')
```

验证下`new Number()`

```javascript
console.log(_.isNumber(new Number())) // true
console.log(typeof new Number()) // 'object'
```

#### isDate

> 判断是否日期对象

```javascript
var isDate = tagTester('Date')
```
